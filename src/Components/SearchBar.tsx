import { SearchOutlined } from "@ant-design/icons";
import "./SearchBar.css";
import { useState } from "react";

export default function SearchBar({ setSearchInput, getMovies }: any) {
  const [inputValue, setInputValue] = useState<string>('');

  const handleKeyDown = (e: any) => {    
    if (e.key === "Enter" && inputValue !== "") {
      setSearchInput(inputValue);
      getMovies();
    }
  };

  return (
    <div className="sm:w-[90%] md:w-[42%] flex">
      <div
        style={{ backgroundColor: "#f0f5ff" }}
        className="flex item-center px-[20px] py-[10px] w-[90%]"
      >
        <div className="flex item-center justify-center mr-[10px]">
          <SearchOutlined />
        </div>
        <div className="flex item-center justify-center text-[18px] w-[100%]">
          <input
            value={inputValue}
            onChange={(e) => setInputValue(e.target.value)}
            onKeyDown={handleKeyDown}
            placeholder="Search for your favorite movies"
            className="px-[7px] text-black search-field w-full font-[Roboto-Regular]"
            type="text"
          />
        </div>
      </div>
      <button
        onClick={() => setSearchInput(inputValue)}
        className="cursor-pointer bg-gray-600 font-[Roboto-Regular] pl-3 pr-3"
      >
        Search
      </button>
    </div>
  );
}
